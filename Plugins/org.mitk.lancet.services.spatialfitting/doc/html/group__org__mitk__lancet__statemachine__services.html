<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LancetSpatialFitting: Org_mitk_lancet_statemachine_services</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LancetSpatialFitting<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">Org_mitk_lancet_statemachine_services</div></div>
</div><!--header-->
<div class="contents">

<p>State Machine Service Module Data Model.  
</p>
<p >State Machine Service Module Data Model. </p>
<p >The state machine service model has very high compatibility and extensibility. Relatively speaking, there will be certain sacrifices in code understanding and readability.</p>
<p >At the design stage, according to the positioning and requirements of the module, the module has a high degree of scalability and configurability, that is, the user configures different state machine <em>.scxml</em> files according to different business needs, instead of rewriting the code of the state machine module.</p>
<h1><a class="anchor" id="Description"></a>
Description</h1>
<p ><b>Structural design</b></p>
<p >The state machine service module is composed of service, state, loader and handler elements, and follows the guidelines of boundary and singleness.If you need to extend it, please follow the style below. In theory, the state machine service can manage the state of a button.</p>
<p >State level diagram: </p><div class="image">
<img src="StatesSketchMap.png" alt=""/>
</div>
<p >Class Diagram: </p><div class="image">
<img src="StateMachineClass.png" alt=""/>
</div>
<p ><code>Service:</code> </p>
<p >It is the only access to the communication between the inner boundary and the outside world. Because of the positioning of this module, the attributes of the inner boundary are basically transparent to the outside world. At the same time, the inner boundary completely ignores how the outside world operates, how to operate and other behaviors, and it is free to play by the outside world.</p>
<p ><code>State:</code> </p>
<p >It is the main role of the internal bound state machine management. It not only describes its own attributes in detail, but also has a close relationship with the above and the following. To sum up, the data structure of the state is a two-way linked list to contact the context, and uses its own attributes to strengthen the context association.</p>
<p ><code>Loader:</code> </p>
<p >The loader is responsible for parsing external parameters and converting them into universally recognizable data objects (<em>#IScxmlStateMachineState</em>) with internal bounds. The loader is driven by the service.The format of external files is explained in <b>Document structure design</b>.</p>
<p ><code>Handler:</code> </p>
<p >The state machine event processing role is responsible for processing the state machine events or monitoring the state of the state machine. When there are changes, it will feed back in the form of <em>Qt signals</em>.</p>
<p ><b>Document structure design</b></p>
<p >External files consist of <em>state machine(.scxml)</em>, <em>state attribute(_subsidiary.json)</em>, and <em>state style file(*.qss)</em>.</p>
<p ><b>.scxml</b>:</p>
<p >An XML form that describes the transition process of the whole state. One project in <em>Qt labs</em> is <em>QScxml</em>, which is based on the upper layer of <em>QStateMachine</em>. It can directly read files in SCXML format to generate internal state objects and members, and can directly perform state transition in Qt, which is very convenient. You may refer to <em>Qt's SCXML</em> module.</p>
<dl class="section warning"><dt>Warning</dt><dd>There are no explicit naming rules for background processing states, such as initialization and termination. However, if you need to map the state to the interface directly or briefly, please follow the naming style of the <em>mitk plug-in</em>. eg.<b>org_mitk_lancet_%*%</b></dd></dl>
<p><b>_subsidiary.json</b>:</p>
<p >The external file describing the status attribute is appended after the naming is restricted to the target status <b>_subsidiary</b>, which is mandatory. Otherwise, the state machine service module will not be able to effectively recognize or parse its contents. The final interpretation right of the elements in the file is left to the <em>Loader</em>.</p>
<dl class="section note"><dt>Note</dt><dd>If there is a new service access, you need to extend the configuration of the status attribute. Maybe you need a new <em>loader</em> to meet your needs.</dd></dl>
<p><b>.qss</b>: Qt layout style explanation file, which is to meet the frequent changes in the interface style. If you are interested in this, you may need to know the Qt QSS style.</p>
<p ><b>Why this design</b></p>
<p >This design style may be too cumbersome, but the core idea of the main framework is high scalability, flexibility and other features. It may be a little far fetched to force the <em>UI</em> attributes here, but when the minimum UI attributes are placed here, the state mapping at all levels of the interface will be based on the state machine service. Imagine the following, with other business requirements involved, Maybe we can complete the interface mapping of the interface state without writing the code of the state machine and Ui. This should be the idea we follow. Extreme laziness is the best.</p>
<p ><b>How to use</b></p>
<p >Scxml sample file:</p>
<p >The Qt SCXML module provides functionality to create state machines from SCXML files. This includes both dynamically creating state machines (loading the SCXML file and instantiating states and transitions) and generating a C++ file that has a class implementing the state machine. It also contains functionality to support data models and executable content.</p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;!--</div>
<div class="line">    Hip software flow status machine definition</div>
<div class="line">    -Initialization</div>
<div class="line">    -MedicalrecordManagement</div>
<div class="line">    -StDevelopmentSurgicalProtocol</div>
<div class="line">    -HardwarePreparation</div>
<div class="line">    -SurgicalRegistration</div>
<div class="line">    -AcetabularPreparation</div>
<div class="line">    -FemurPreparation</div>
<div class="line">    -SurgicalOutcomes</div>
<div class="line"> </div>
<div class="line">    Rules <span class="keywordflow">for</span> state name definition &lt;Process editor plugin name&gt; (all lower <span class="keywordflow">case</span> letters)</div>
<div class="line">    .eg &lt;org_mitk_lancet_tha_medicalrecordmanagement&gt;.</div>
<div class="line"> </div>
<div class="line">    Jump <span class="keyword">event</span> name definition rules: to_&lt;Process editor plugin name&gt; (all lower <span class="keywordflow">case</span> letters)</div>
<div class="line">    .eg to_org_mitk_lancet_tha_medicalrecordmanagement.</div>
<div class="line">--&gt;</div>
<div class="line">&lt;scxml</div>
<div class="line">    xmlns=<span class="stringliteral">&quot;http://www.w3.org/2005/07/scxml&quot;</span></div>
<div class="line">    version=<span class="stringliteral">&quot;1.0&quot;</span></div>
<div class="line">    binding=<span class="stringliteral">&quot;early&quot;</span></div>
<div class="line">    xmlns:qt=<span class="stringliteral">&quot;http://www.qt.io/2015/02/scxml-ext&quot;</span></div>
<div class="line">    datamodel=<span class="stringliteral">&quot;ecmascript&quot;</span></div>
<div class="line">    name=<span class="stringliteral">&quot;LancetThaScxmlStateMachineDebug&quot;</span></div>
<div class="line">    qt:editorversion=<span class="stringliteral">&quot;4.13.1&quot;</span></div>
<div class="line">    initial=<span class="stringliteral">&quot;initialization&quot;</span></div>
<div class="line">&gt;</div>
<div class="line">    &lt;!--</div>
<div class="line">        name: initialization</div>
<div class="line">        Sub processes Scxml files: initialization.scxml</div>
<div class="line">        events:</div>
<div class="line">            <span class="keyword">event</span> name                                                      target state</div>
<div class="line">            to_applicationquit                                              applicationquit</div>
<div class="line">            to_org_mitk_lancet_tha_medicalrecordmanagement                  org_mitk_lancet_tha_medicalrecordmanagement</div>
<div class="line">    --&gt;</div>
<div class="line">    &lt;state <span class="keywordtype">id</span>=<span class="stringliteral">&quot;initialization&quot;</span>&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_applicationquit&quot;</span> target=<span class="stringliteral">&quot;applicationquit&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_medicalrecordmanagement&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_medicalrecordmanagement&quot;</span>/&gt;</div>
<div class="line">    &lt;/state&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;!--</div>
<div class="line">        name: org_mitk_lancet_tha_medicalrecordmanagement</div>
<div class="line">        Sub processes Scxml files: medicalrecordmanagement.scxml</div>
<div class="line">        events:</div>
<div class="line">            <span class="keyword">event</span> name                                                      target state</div>
<div class="line">            to_applicationquit                                              applicationquit</div>
<div class="line">            to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol            org_mitk_lancet_tha_stdevelopmentsurgicalprotocol</div>
<div class="line">            to_org_mitk_lancet_tha_linkinghardware                          org_mitk_lancet_tha_linkinghardware</div>
<div class="line">            to_org_mitk_lancet_tha_surgicalregistration                     org_mitk_lancet_tha_surgicalregistration</div>
<div class="line">            to_org_mitk_lancet_tha_acetabularpreparation                    org_mitk_lancet_tha_acetabularpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_femurpreparation                         org_mitk_lancet_tha_femurpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_surgicaloutcomes                         org_mitk_lancet_tha_surgicaloutcomes</div>
<div class="line">    --&gt;</div>
<div class="line">    &lt;state <span class="keywordtype">id</span>=<span class="stringliteral">&quot;org_mitk_lancet_tha_medicalrecordmanagement&quot;</span>&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_applicationquit&quot;</span> target=<span class="stringliteral">&quot;applicationquit&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_linkinghardware&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_linkinghardware&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicalregistration&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicalregistration&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_acetabularpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_acetabularpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_femurpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_femurpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicaloutcomes&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicaloutcomes&quot;</span>/&gt;</div>
<div class="line">    &lt;/state&gt;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    &lt;!--</div>
<div class="line">        name: org_mitk_lancet_tha_stdevelopmentsurgicalprotocol</div>
<div class="line">        Sub processes Scxml files: medicalrecordmanagement.scxml</div>
<div class="line">        events:</div>
<div class="line">            <span class="keyword">event</span> name                                                      target state</div>
<div class="line">            to_applicationquit                                              applicationquit</div>
<div class="line">            to_org_mitk_lancet_tha_medicalrecordmanagement                  org_mitk_lancet_tha_medicalrecordmanagement</div>
<div class="line">            to_org_mitk_lancet_tha_linkinghardware                          org_mitk_lancet_tha_linkinghardware</div>
<div class="line">            to_org_mitk_lancet_tha_surgicalregistration                     org_mitk_lancet_tha_surgicalregistration</div>
<div class="line">            to_org_mitk_lancet_tha_acetabularpreparation                    org_mitk_lancet_tha_acetabularpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_femurpreparation                         org_mitk_lancet_tha_femurpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_surgicaloutcomes                         org_mitk_lancet_tha_surgicaloutcomes</div>
<div class="line">    --&gt;</div>
<div class="line">    &lt;state <span class="keywordtype">id</span>=<span class="stringliteral">&quot;org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span>&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_applicationquit&quot;</span> target=<span class="stringliteral">&quot;applicationquit&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_medicalrecordmanagement&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_medicalrecordmanagement&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_linkinghardware&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_linkinghardware&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicalregistration&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicalregistration&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_acetabularpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_acetabularpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_femurpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_femurpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicaloutcomes&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicaloutcomes&quot;</span>/&gt;</div>
<div class="line">    &lt;/state&gt;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    &lt;!--</div>
<div class="line">        name: org_mitk_lancet_tha_linkinghardware</div>
<div class="line">        Sub processes Scxml files: linkinghardware.scxml</div>
<div class="line">        events:</div>
<div class="line">            <span class="keyword">event</span> name                                                      target state</div>
<div class="line">            to_applicationquit                                              applicationquit</div>
<div class="line">            to_org_mitk_lancet_tha_medicalrecordmanagement                  org_mitk_lancet_tha_medicalrecordmanagement</div>
<div class="line">            to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol            org_mitk_lancet_tha_stdevelopmentsurgicalprotocol</div>
<div class="line">            to_org_mitk_lancet_tha_surgicalregistration                     org_mitk_lancet_tha_surgicalregistration</div>
<div class="line">            to_org_mitk_lancet_tha_acetabularpreparation                    org_mitk_lancet_tha_acetabularpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_femurpreparation                         org_mitk_lancet_tha_femurpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_surgicaloutcomes                         org_mitk_lancet_tha_surgicaloutcomes</div>
<div class="line">    --&gt;</div>
<div class="line">    &lt;state <span class="keywordtype">id</span>=<span class="stringliteral">&quot;org_mitk_lancet_tha_linkinghardware&quot;</span>&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_applicationquit&quot;</span> target=<span class="stringliteral">&quot;applicationquit&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_medicalrecordmanagement&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_medicalrecordmanagement&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicalregistration&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicalregistration&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_acetabularpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_acetabularpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_femurpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_femurpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicaloutcomes&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicaloutcomes&quot;</span>/&gt;</div>
<div class="line">    &lt;/state&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;!--</div>
<div class="line">        name: org_mitk_lancet_tha_surgicalregistration</div>
<div class="line">        Sub processes Scxml files: surgicalregistration.scxml</div>
<div class="line">        events:</div>
<div class="line">            <span class="keyword">event</span> name                                                      target state</div>
<div class="line">            to_applicationquit                                              applicationquit</div>
<div class="line">            to_org_mitk_lancet_tha_medicalrecordmanagement                  org_mitk_lancet_tha_medicalrecordmanagement</div>
<div class="line">            to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol            org_mitk_lancet_tha_stdevelopmentsurgicalprotocol</div>
<div class="line">            to_org_mitk_lancet_tha_linkinghardware                          org_mitk_lancet_tha_linkinghardware</div>
<div class="line">            to_org_mitk_lancet_tha_acetabularpreparation                    org_mitk_lancet_tha_acetabularpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_femurpreparation                         org_mitk_lancet_tha_femurpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_surgicaloutcomes                         org_mitk_lancet_tha_surgicaloutcomes</div>
<div class="line">    --&gt;</div>
<div class="line">    &lt;state <span class="keywordtype">id</span>=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicalregistration&quot;</span>&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_applicationquit&quot;</span> target=<span class="stringliteral">&quot;applicationquit&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_medicalrecordmanagement&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_medicalrecordmanagement&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_linkinghardware&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_linkinghardware&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_acetabularpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_acetabularpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_femurpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_femurpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicaloutcomes&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicaloutcomes&quot;</span>/&gt;</div>
<div class="line">    &lt;/state&gt;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    &lt;!--</div>
<div class="line">        name: org_mitk_lancet_tha_acetabularpreparation</div>
<div class="line">        Sub processes Scxml files: acetabularpreparation.scxml</div>
<div class="line">        events:</div>
<div class="line">            <span class="keyword">event</span> name                                                      target state</div>
<div class="line">            to_applicationquit                                              applicationquit</div>
<div class="line">            to_org_mitk_lancet_tha_medicalrecordmanagement                  org_mitk_lancet_tha_medicalrecordmanagement</div>
<div class="line">            to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol            org_mitk_lancet_tha_stdevelopmentsurgicalprotocol</div>
<div class="line">            to_org_mitk_lancet_tha_linkinghardware                          org_mitk_lancet_tha_linkinghardware</div>
<div class="line">            to_org_mitk_lancet_tha_surgicalregistration                     org_mitk_lancet_tha_surgicalregistration</div>
<div class="line">            to_org_mitk_lancet_tha_femurpreparation                         org_mitk_lancet_tha_femurpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_surgicaloutcomes                         org_mitk_lancet_tha_surgicaloutcomes</div>
<div class="line">    --&gt;</div>
<div class="line">    &lt;state <span class="keywordtype">id</span>=<span class="stringliteral">&quot;org_mitk_lancet_tha_acetabularpreparation&quot;</span>&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_applicationquit&quot;</span> target=<span class="stringliteral">&quot;applicationquit&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_medicalrecordmanagement&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_medicalrecordmanagement&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_linkinghardware&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_linkinghardware&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicalregistration&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicalregistration&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_femurpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_femurpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicaloutcomes&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicaloutcomes&quot;</span>/&gt;</div>
<div class="line">    &lt;/state&gt;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    &lt;!--</div>
<div class="line">        name: org_mitk_lancet_tha_femurpreparation</div>
<div class="line">        Sub processes Scxml files: femurpreparation.scxml</div>
<div class="line">        events:</div>
<div class="line">            <span class="keyword">event</span> name                                                      target state</div>
<div class="line">            to_applicationquit                                              applicationquit</div>
<div class="line">            to_org_mitk_lancet_tha_medicalrecordmanagement                  org_mitk_lancet_tha_medicalrecordmanagement</div>
<div class="line">            to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol            org_mitk_lancet_tha_stdevelopmentsurgicalprotocol</div>
<div class="line">            to_org_mitk_lancet_tha_linkinghardware                          org_mitk_lancet_tha_linkinghardware</div>
<div class="line">            to_org_mitk_lancet_tha_surgicalregistration                     org_mitk_lancet_tha_surgicalregistration</div>
<div class="line">            to_org_mitk_lancet_tha_acetabularpreparation                    org_mitk_lancet_tha_acetabularpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_surgicaloutcomes                         org_mitk_lancet_tha_surgicaloutcomes</div>
<div class="line">    --&gt;</div>
<div class="line">    &lt;state <span class="keywordtype">id</span>=<span class="stringliteral">&quot;org_mitk_lancet_tha_femurpreparation&quot;</span>&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_applicationquit&quot;</span> target=<span class="stringliteral">&quot;applicationquit&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_medicalrecordmanagement&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_medicalrecordmanagement&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_linkinghardware&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_linkinghardware&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicalregistration&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicalregistration&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_acetabularpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_acetabularpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicaloutcomes&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicaloutcomes&quot;</span>/&gt;</div>
<div class="line">    &lt;/state&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;!--</div>
<div class="line">        name: org_mitk_lancet_tha_surgicaloutcomes</div>
<div class="line">        Sub processes Scxml files: surgicaloutcomes.scxml</div>
<div class="line">        events:</div>
<div class="line">            <span class="keyword">event</span> name                                                      target state</div>
<div class="line">            to_applicationquit                                              applicationquit</div>
<div class="line">            to_org_mitk_lancet_tha_medicalrecordmanagement                  org_mitk_lancet_tha_medicalrecordmanagement</div>
<div class="line">            to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol            org_mitk_lancet_tha_stdevelopmentsurgicalprotocol</div>
<div class="line">            to_org_mitk_lancet_tha_linkinghardware                          org_mitk_lancet_tha_linkinghardware</div>
<div class="line">            to_org_mitk_lancet_tha_surgicalregistration                     org_mitk_lancet_tha_surgicalregistration</div>
<div class="line">            to_org_mitk_lancet_tha_acetabularpreparation                    org_mitk_lancet_tha_acetabularpreparation</div>
<div class="line">            to_org_mitk_lancet_tha_femurpreparation                         org_mitk_lancet_tha_femurpreparation</div>
<div class="line">    --&gt;</div>
<div class="line">    &lt;state <span class="keywordtype">id</span>=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicaloutcomes&quot;</span>&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_applicationquit&quot;</span> target=<span class="stringliteral">&quot;applicationquit&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_medicalrecordmanagement&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_medicalrecordmanagement&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_stdevelopmentsurgicalprotocol&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_linkinghardware&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_linkinghardware&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicalregistration&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicalregistration&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_acetabularpreparation&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_acetabularpreparation&quot;</span>/&gt;</div>
<div class="line">        &lt;transition type=<span class="stringliteral">&quot;internal&quot;</span> <span class="keyword">event</span>=<span class="stringliteral">&quot;to_org_mitk_lancet_tha_surgicaloutcomes&quot;</span> target=<span class="stringliteral">&quot;org_mitk_lancet_tha_surgicaloutcomes&quot;</span>/&gt;</div>
<div class="line">    &lt;/state&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keyword">final</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;applicationquit&quot;</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;/<span class="keyword">final</span>&gt;</div>
<div class="line">&lt;/scxml&gt;</div>
</div><!-- fragment --><p >Status Properties Sample File:</p>
<p >The attributes that describe the state (unit) in detail, including data structure, interface style, etc.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;properties&quot;</span>:</div>
<div class="line">    {</div>
<div class="line">        <span class="stringliteral">&quot;id&quot;</span>: <span class="stringliteral">&quot;org_mitk_lancet_tka_medicalrecordmanagement&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;objectName&quot;</span>: <span class="stringliteral">&quot;ActionMedicalRecordManagement&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;uiName&quot;</span>: <span class="stringliteral">&quot;MedicalRecordManagement&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;theme&quot;</span>:</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;defaultStyle&quot;</span>:</div>
<div class="line">            {</div>
<div class="line">                <span class="stringliteral">&quot;actionQssFilePath&quot;</span>: <span class="stringliteral">&quot;:/resources/qss/tha/medicalrecordmanagement/action_medicalrecordmanagement_default.qss&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;editorQssFilePath&quot;</span>: <span class="stringliteral">&quot;:/resources/qss/tha/medicalrecordmanagement/editor_medicalrecordmanagement_default.qss&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;viewQssFilePath&quot;</span>: <span class="stringliteral">&quot;:/resources/qss/tha/medicalrecordmanagement/view_medicalrecordmanagement_default.qss&quot;</span></div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p >Qt Qss Sample File:</p>
<p >Formulate the display style of Qt components. Refer to Qt API document for detailed usage.</p>
<div class="fragment"><div class="line">*</div>
<div class="line">{</div>
<div class="line">    color: beige;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QLabel, QAbstractButton</div>
<div class="line">{</div>
<div class="line">    font: bold;</div>
<div class="line">    color: yellow;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QFrame</div>
<div class="line">{</div>
<div class="line">    background-color: rgba(96,96,255,60%);</div>
<div class="line">    border-color: rgb(32,32,196);</div>
<div class="line">    border-width: 3px;</div>
<div class="line">    border-style: solid;</div>
<div class="line">    border-radius: 5;</div>
<div class="line">    padding: 3px;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QAbstractButton</div>
<div class="line">{</div>
<div class="line">    background: qlineargradient(x1:0, y1:0, x2:0, y2:1,</div>
<div class="line">                             stop:0 lightblue, stop:0.5 darkblue);</div>
<div class="line">    border-width: 3px;</div>
<div class="line">    border-color: darkblue;</div>
<div class="line">    border-style: solid;</div>
<div class="line">    border-radius: 5;</div>
<div class="line">    padding: 3px;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QAbstractButton:pressed</div>
<div class="line">{</div>
<div class="line">    background: qlineargradient(x1:0, y1:0, x2:0, y2:1,</div>
<div class="line">                             stop:0.5 darkblue, stop:1 lightblue);</div>
<div class="line">    border-color: beige;</div>
<div class="line">}</div>
</div><!-- fragment --><p >Import External Files:</p>
<p >You should have <em>.scxml</em>, <em>_subsidiary.json</em>, <em>.qss</em> files before importing external files.Then you need to use the service import interface to parse the external file into a valid state machine service element.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> context = org_mitk_lancet_tha_application_Activator::GetPluginContext();</div>
<div class="line"><span class="keyword">auto</span> stateMachineServiceRef = context-&gt;getServiceReference&lt;lancet::IScxmlStateMachineService&gt;();</div>
<div class="line"><span class="keyword">auto</span> stateMachineService = context-&gt;getService&lt;lancet::IScxmlStateMachineService&gt;(stateMachineServiceRef);</div>
<div class="line"><span class="comment">// F:/Examples/ExampleQtScxmlStateMachine/LancetThaScxmlStateMachine_debug.scxml</span></div>
<div class="line"><span class="keywordflow">if</span> (<span class="keyword">nullptr</span> != stateMachineService)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//qRegisterMetaType&lt;lancet::IScxmlStateMachineState&gt;(&quot;lancet::IScxmlStateMachineState&quot;);</span></div>
<div class="line">    stateMachineService-&gt;Initialize();</div>
<div class="line">    stateMachineService-&gt;CreateScxmlStateMachine(</div>
<div class="line">        <span class="stringliteral">&quot;Y:/LancetMitk_SBD/MITK-build/bin/resources/org_mitk_lancet_tha_application.scxml&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;empty&quot;</span>,</div>
<div class="line">        lancet::IScxmlStateMachineState::StateType::Admin,</div>
<div class="line">        lancet::IScxmlStateMachineState::Pointer(<span class="keyword">nullptr</span>), <span class="stringliteral">&quot;org_mitk_lancet_tha_application&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; stateMachineService-&gt;GetAdminState()-&gt;ToString().toStdString();</div>
<div class="line">}</div>
</div><!-- fragment --><p >How to map to interface:</p>
<p >Before operating this behavior, you should and must import an external file or create a state machine element. After that, you can traverse the state machine service element to generate a formatted interface. The style of the interface can be configured through the properties of the state element.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> context = org_mitk_lancet_tha_application_Activator::GetPluginContext();</div>
<div class="line"><span class="keyword">auto</span> stateMachineServiceRef = context-&gt;getServiceReference&lt;lancet::IScxmlStateMachineService&gt;();</div>
<div class="line"><span class="keyword">auto</span> stateMachineService = context-&gt;getService&lt;lancet::IScxmlStateMachineService&gt;(stateMachineServiceRef);</div>
<div class="line"><span class="keywordflow">if</span> (stateMachineService != <span class="keyword">nullptr</span> &amp;&amp; stateMachineService-&gt;GetAdminState().IsNotNull())</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> item : stateMachineService-&gt;GetAdminState()-&gt;GetSubStateMachines())</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// proprety</span></div>
<div class="line">        <span class="comment">//QString itemActionId = item-&gt;GetStateId();</span></div>
<div class="line">        QString itemActionUiName = item-&gt;GetActionProperty()-&gt;GetStateUiName();</div>
<div class="line">        QString itemActionObjectName = item-&gt;GetActionProperty()-&gt;GetStateObjectName();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// qss</span></div>
<div class="line">        QString itemActionQSS = item-&gt;GetActionProperty()-&gt;GetActionQss();</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> action = menuBar-&gt;addAction(itemActionUiName);</div>
<div class="line">        action-&gt;setObjectName(itemActionObjectName);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// You may customize the interface status trigger unit components.</span></div>
<div class="line">        <span class="comment">// Widget-&gt;setStyleSheet(itemActionQSS);</span></div>
<div class="line">    connect(action, &amp;QAction::triggered, <span class="keyword">this</span>, &amp;MyWidget::onStateMachine_ActionClicked);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p >How to focus on events:</p>
<p >tate machine events provide the most basic state jump events. Of course, this module can realize more than these businesses. Other additional functions require selfless contributions from contributors.</p>
<div class="fragment"><div class="line"><span class="comment">// connect to state machine for Qt.</span></div>
<div class="line"><span class="keyword">auto</span> adminStateHandle = stateMachineService-&gt;GetAdminState()-&gt;GetStateMachineHandler();</div>
<div class="line">connect(adminStateHandle.GetPointer(), SIGNAL(StateEnter(IScxmlStateMachineState*)),</div>
<div class="line">    <span class="keyword">this</span>, SLOT(onModuleStateMachineStateEnter(IScxmlStateMachineState*)));</div>
<div class="line">connect(adminStateHandle.GetPointer(), SIGNAL(StateExit(IScxmlStateMachineState*)),</div>
<div class="line">    <span class="keyword">this</span>, SLOT(onModuleStateMachineStateExit(IScxmlStateMachineState*)));</div>
<div class="line">stateMachineService-&gt;StartStateMachine();</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
