<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkModelSignalImageGenerator.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#ifndef MODELSIGNALIMAGEGENERATOR_H
#define MODELSIGNALIMAGEGENERATOR_H


#include "mitkModelParameterizerBase.h"
#include "mitkImage.h"

#include "MitkModelFitExports.h"

namespace mitk
{
    /** Generator class that takes a model parameterizer instance, given parameter images and generates
     the corresponding signal image. Thus the generator simulates the signals of the model specified by
     parameterizer given the passed parameter images. The time grid of the signal is also defined by the
     parameterizer.*/
    class MITKMODELFIT_EXPORT ModelSignalImageGenerator: public ::itk::Object
    {
    public:

<span style = "background-color:#fdd">        mitkClassMacroItkParent(ModelSignalImageGenerator, itk::Object);
        itkFactorylessNewMacro(Self);</span>

        typedef mitk::Image::Pointer ParameterImageType;
        typedef std::vector&lt;std::string&gt; ParameterNamesType;
        typedef unsigned int ParametersIndexType;
        typedef std::vector&lt;ParameterImageType&gt; ParameterVectorType;
        typedef std::map&lt;ParametersIndexType, ParameterImageType&gt; ParameterMapType;


        typedef mitk::Image::Pointer ResultImageType;
        typedef mitk::Image::Pointer MaskType;

        typedef mitk::ModelBase::TimeGridType GridType;

<span style = "background-color:#fdd">        itkSetObjectMacro(Parameterizer, ModelParameterizerBase);
        itkGetObjectMacro(Parameterizer, ModelParameterizerBase);</span>

        void SetParameterInputImage(const ParametersIndexType index, ParameterImageType inputParameterImage);

        ResultImageType GetGeneratedImage();
        void Generate();

    protected:
<span style = "background-color:#fdd">        ModelSignalImageGenerator()
        {};</span>
        ~ModelSignalImageGenerator() override
<span style = "background-color:#fdd">        {};</span>

        template &lt;typename TPixel, unsigned int VDim&gt;
        void DoGenerateData(itk::Image&lt;TPixel, VDim&gt;* image);

        template &lt;typename TPixel, unsigned int VDim&gt;
        void DoPrepareMask(itk::Image&lt;TPixel, VDim&gt;* image);

    private:
        ParameterMapType m_ParameterInputMap;
        ParameterVectorType  m_InputParameterImages;

        void SortParameterImages();

        MaskType m_Mask;

        typedef itk::Image&lt;unsigned char, 3&gt; InternalMaskType;
        InternalMaskType::Pointer m_InternalMask;

        ResultImageType m_ResultImage;
        ModelParameterizerBase::Pointer m_Parameterizer;
    };
}


#endif // MODELSIGNALIMAGEGENERATOR_H</pre>
	</body>
</html>