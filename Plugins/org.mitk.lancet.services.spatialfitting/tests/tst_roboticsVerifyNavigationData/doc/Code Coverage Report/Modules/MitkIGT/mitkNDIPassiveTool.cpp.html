<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkNDIPassiveTool.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include "mitkNDIPassiveTool.h"
#include &lt;iostream&gt;
#include &lt;fstream&gt;


mitk::NDIPassiveTool::NDIPassiveTool()
<span style = "background-color:#fdd">: TrackingTool(),
m_SROMData(nullptr),
m_SROMDataLength(0),
m_TrackingPriority(Dynamic),
m_PortHandle()
{
}</span>


mitk::NDIPassiveTool::~NDIPassiveTool()
<span style = "background-color:#fdd">{
  if (m_SROMData != nullptr)</span>
  {
<span style = "background-color:#fdd">    delete[] m_SROMData;
    m_SROMData = nullptr;</span>
  }
<span style = "background-color:#fdd">}</span>


bool mitk::NDIPassiveTool::LoadSROMFile(const char* filename)
<span style = "background-color:#fdd">{
  if (filename == nullptr)
    return false;
  if (filename[0] == '\0')
    return false;</span>

<span style = "background-color:#fdd">  m_File = filename;
  std::basic_ifstream&lt;char&gt; file;
  file.open(filename, std::ios::in | std::ios::binary); // open the file
  if (file.is_open() == false)
    return false;</span>

<span style = "background-color:#fdd">  file.seekg (0, std::ios::end);                // get the length of the file
  unsigned int newLength = file.tellg();
  file.seekg (0, std::ios::beg);
  auto  newData = new char [newLength];         // create a buffer to store the srom file
  file.read(newData, newLength);                // read the file into the buffer
  file.close();
  if (file.fail() == true)                      // reading of data unsuccessful?</span>
  {
<span style = "background-color:#fdd">    delete[] newData;
    return false;</span>
  }
<span style = "background-color:#fdd">  if (m_SROMData != nullptr)                       // reading was successful, delete old data
    delete[] m_SROMData;
  m_SROMDataLength = newLength;                 // set member variables to new values
  m_SROMData = (unsigned char*) newData;
  this-&gt;Modified();
  return true;
}</span>


const unsigned char* mitk::NDIPassiveTool::GetSROMData() const
<span style = "background-color:#fdd">{
  return m_SROMData;
}</span>


unsigned int mitk::NDIPassiveTool::GetSROMDataLength() const
<span style = "background-color:#fdd">{
  return m_SROMDataLength;
}</span></pre>
	</body>
</html>