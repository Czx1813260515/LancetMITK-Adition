<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkGetClassHierarchy.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#ifndef MITKGETCLASSHIERARCHY_H
#define MITKGETCLASSHIERARCHY_H

#include &lt;string&gt;
#include &lt;vector&gt;

namespace mitk
{
#ifndef DOXYGEN_SKIP

  template &lt;typename T&gt;
  class HasMethodGetStaticNameOfClass
  {
    typedef char Small;
    struct Big
    {
      char dummy[2];
    };

    template &lt;const char *(*)()&gt;
    struct SFINAE
    {
    };
    template &lt;typename U&gt;
    static Small Test(SFINAE&lt;&amp;U::GetStaticNameOfClass&gt; *);
    template &lt;typename U&gt;
    static Big Test(...);

  public:
    enum
    {
      value = sizeof(Test&lt;T&gt;(nullptr)) == sizeof(Small)
    };
  };

  template &lt;typename T, bool&gt;
  struct StaticNameOfClass
  {
<span style = "background-color:#fdd">    static std::string value() { return typeid(T).name(); }</span>
  };

  template &lt;typename T&gt;
  struct StaticNameOfClass&lt;T, true&gt;
  {
<span style = "background-color:#fdd">    static std::string value() { return T::GetStaticNameOfClass(); }</span>
  };

  template &lt;typename T&gt;
  class HasTypeSuperclass
  {
    typedef char Small;
    struct Big
    {
      char dummy[2];
    };

    template &lt;typename U&gt;
    static Small Test(typename U::Superclass *);
    template &lt;typename U&gt;
    static Big Test(...);

  public:
    enum
    {
      value = sizeof(Test&lt;T&gt;(nullptr)) == sizeof(Small)
    };
  };

  template &lt;typename T, bool&gt;
  struct GetSuperclassType
  {
    typedef void value;
  };

  template &lt;typename T&gt;
  struct GetSuperclassType&lt;T, true&gt;
  {
    typedef typename T::Superclass value;
  };

  template &lt;typename T&gt;
  std::vector&lt;std::string&gt; GetClassHierarchy();

  template &lt;&gt;
  inline std::vector&lt;std::string&gt; GetClassHierarchy&lt;void&gt;()
<span style = "background-color:#fdd">  {
    return std::vector&lt;std::string&gt;();
  }</span>

#endif

  /**
   * Get the class hierarchy for MITK classes as a list of class names.
   *
   * This function will return the name of classes and their direct
   * super-classes as specified in the mitkClassMacro. The order is from
   * most derived class to the last base class containing the mitkClassMacro.
   */
  template &lt;typename T&gt;
  std::vector&lt;std::string&gt; GetClassHierarchy()
<span style = "background-color:#fdd">  {
    std::vector&lt;std::string&gt; result;
    std::string name = StaticNameOfClass&lt;T, HasMethodGetStaticNameOfClass&lt;T&gt;::value&gt;::value();
    if (!name.empty())
      result.push_back(name);
    std::vector&lt;std::string&gt; superHierarchy =</span>
      GetClassHierarchy&lt;typename GetSuperclassType&lt;T, HasTypeSuperclass&lt;T&gt;::value&gt;::value&gt;();
<span style = "background-color:#fdd">    result.insert(result.end(), superHierarchy.begin(), superHierarchy.end());
    return result;
  }</span>
}

#endif // MITKGETCLASSHIERARCHY_H</pre>
	</body>
</html>