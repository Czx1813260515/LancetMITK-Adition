<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkVtkWidgetRendering.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include "mitkVtkWidgetRendering.h"

#include "mitkVtkLayerController.h"

#include &lt;itkMacro.h&gt;
#include &lt;itkObject.h&gt;
#include &lt;itksys/SystemTools.hxx&gt;
#include &lt;mitkConfig.h&gt;

#include &lt;vtkObjectFactory.h&gt;
#include &lt;vtkRenderWindow.h&gt;
#include &lt;vtkRenderer.h&gt;
#include &lt;vtkRendererCollection.h&gt;

#include &lt;vtkInteractorObserver.h&gt;

#include &lt;algorithm&gt;

<span style = "background-color:#fdd">mitk::VtkWidgetRendering::VtkWidgetRendering() : m_RenderWindow(nullptr), m_VtkWidget(nullptr), m_IsEnabled(false)
{
  m_Renderer = vtkRenderer::New();
}</span>

mitk::VtkWidgetRendering::~VtkWidgetRendering()
<span style = "background-color:#fdd">{
  if (m_RenderWindow != nullptr)
    if (this-&gt;IsEnabled())
      this-&gt;Disable();</span>

<span style = "background-color:#fdd">  if (m_Renderer != nullptr)
    m_Renderer-&gt;Delete();
}</span>

/**
 * Sets the renderwindow, in which the widget
 * will be shown. Make sure, you have called this function
 * before calling Enable()
 */
void mitk::VtkWidgetRendering::SetRenderWindow(vtkRenderWindow *renderWindow)
<span style = "background-color:#fdd">{
  m_RenderWindow = renderWindow;
}</span>

/**
 * Returns the vtkRenderWindow, which is used
 * for displaying the widget
 */
vtkRenderWindow *mitk::VtkWidgetRendering::GetRenderWindow()
<span style = "background-color:#fdd">{
  return m_RenderWindow;
}</span>

/**
 * Returns the renderer responsible for
 * rendering the  widget into the
 * vtkRenderWindow
 */
vtkRenderer *mitk::VtkWidgetRendering::GetVtkRenderer()
<span style = "background-color:#fdd">{
  return m_Renderer;
}</span>

/**
 * Enables drawing of the widget.
 * If you want to disable it, call the Disable() function.
 */
void mitk::VtkWidgetRendering::Enable()
<span style = "background-color:#fdd">{
  if (m_IsEnabled)
    return;</span>

<span style = "background-color:#fdd">  if (m_RenderWindow != nullptr)</span>
  {
<span style = "background-color:#fdd">    vtkRenderWindowInteractor *interactor = m_RenderWindow-&gt;GetInteractor();</span>

<span style = "background-color:#fdd">    if (m_VtkWidget != nullptr)</span>
    {
<span style = "background-color:#fdd">      m_VtkWidget-&gt;SetInteractor(interactor);</span>

<span style = "background-color:#fdd">      mitk::VtkLayerController *layerController = mitk::VtkLayerController::GetInstance(m_RenderWindow);</span>

<span style = "background-color:#fdd">      if (layerController)</span>
      {
<span style = "background-color:#fdd">        layerController-&gt;InsertForegroundRenderer(m_Renderer, false);</span>
      }

<span style = "background-color:#fdd">      m_IsEnabled = true;</span>
    }
  }
<span style = "background-color:#fdd">}</span>

/**
 * Disables drawing of the widget.
 * If you want to enable it, call the Enable() function.
 */
void mitk::VtkWidgetRendering::Disable()
<span style = "background-color:#fdd">{
  if (this-&gt;IsEnabled())</span>
  {
<span style = "background-color:#fdd">    mitk::VtkLayerController *layerController = mitk::VtkLayerController::GetInstance(m_RenderWindow);</span>

<span style = "background-color:#fdd">    if (layerController)</span>
    {
<span style = "background-color:#fdd">      layerController-&gt;RemoveRenderer(m_Renderer);</span>
    }

<span style = "background-color:#fdd">    m_IsEnabled = false;</span>
  }
<span style = "background-color:#fdd">}</span>

/**
 * Checks, if the widget is currently
 * enabled (visible)
 */
bool mitk::VtkWidgetRendering::IsEnabled()
<span style = "background-color:#fdd">{
  return m_IsEnabled;
}</span>

void mitk::VtkWidgetRendering::SetRequestedRegionToLargestPossibleRegion()
<span style = "background-color:#fdd">{</span>
  // nothing to do
<span style = "background-color:#fdd">}</span>

bool mitk::VtkWidgetRendering::RequestedRegionIsOutsideOfTheBufferedRegion()
<span style = "background-color:#fdd">{
  return false;
}</span>

bool mitk::VtkWidgetRendering::VerifyRequestedRegion()
<span style = "background-color:#fdd">{
  return true;
}</span>

void mitk::VtkWidgetRendering::SetRequestedRegion(const itk::DataObject *)
<span style = "background-color:#fdd">{</span>
  // nothing to do
<span style = "background-color:#fdd">}</span>

void mitk::VtkWidgetRendering::SetVtkWidget(vtkInteractorObserver *widget)
<span style = "background-color:#fdd">{
  m_VtkWidget = widget;
}</span>

vtkInteractorObserver *mitk::VtkWidgetRendering::GetVtkWidget() const
<span style = "background-color:#fdd">{
  return m_VtkWidget;
}</span></pre>
	</body>
</html>