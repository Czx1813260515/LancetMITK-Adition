<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkImageCast.txx</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include &lt;mitkImageAccessByItk.h&gt;
#include &lt;mitkImageCast.h&gt;

#include &lt;itkCastImageFilter.h&gt;
#include &lt;itkImage.h&gt;

namespace mitk
{
#ifndef DOXYGEN_SKIP

  template &lt;typename ItkOutputImageType&gt;
  void CastToItkImage(const mitk::Image *mitkImage, itk::SmartPointer&lt;ItkOutputImageType&gt; &amp;itkOutputImage)
<span style = "background-color:#fdd">  {
    AccessFixedDimensionByItk_1(mitkImage, _CastToItkImage2Access, ItkOutputImageType::ImageDimension, itkOutputImage);
  }</span>

  template &lt;typename TPixelType, unsigned int VImageDimension&gt;
  void CastToItkImage(const mitk::Image *mitkImage,
                      itk::SmartPointer&lt;itk::VectorImage&lt;TPixelType, VImageDimension&gt;&gt; &amp;itkOutputImage)
<span style = "background-color:#fdd">  {
    AccessVectorFixedDimensionByItk_n(mitkImage, _CastToItkImage2Access, VImageDimension, (itkOutputImage));
  }</span>

  template &lt;typename TPixel, unsigned int VImageDimension, class ItkOutputImageType&gt;
  void _CastToItkImage2Access(const itk::Image&lt;TPixel, VImageDimension&gt; *itkInputImage,
                              itk::SmartPointer&lt;ItkOutputImageType&gt; &amp;itkOutputImage)
<span style = "background-color:#fdd">  {</span>
    typedef itk::Image&lt;TPixel, VImageDimension&gt; ItkInputImageType;
<span style = "background-color:#fdd">    if (typeid(ItkInputImageType) == typeid(ItkOutputImageType))</span>
    {
<span style = "background-color:#fdd">      itkOutputImage = const_cast&lt;ItkOutputImageType *&gt;(reinterpret_cast&lt;const ItkOutputImageType *&gt;(itkInputImage));
      return;</span>
    }
    typedef itk::CastImageFilter&lt;ItkInputImageType, ItkOutputImageType&gt; CastImageFilterType;
<span style = "background-color:#fdd">    typename CastImageFilterType::Pointer castImageFilter = CastImageFilterType::New();
    castImageFilter-&gt;SetInput(itkInputImage);
    castImageFilter-&gt;Update();
    itkOutputImage = castImageFilter-&gt;GetOutput();
  }</span>

  template &lt;typename TPixel, unsigned int VImageDimension, class ItkOutputImageType&gt;
  void _CastToItkImage2Access(const itk::VectorImage&lt;TPixel, VImageDimension&gt; *itkInputImage,
                              itk::SmartPointer&lt;ItkOutputImageType&gt; &amp;itkOutputImage)
<span style = "background-color:#fdd">  {</span>
    typedef itk::VectorImage&lt;TPixel, VImageDimension&gt; ItkInputImageType;
<span style = "background-color:#fdd">    if (typeid(ItkInputImageType) == typeid(ItkOutputImageType))</span>
    {
<span style = "background-color:#fdd">      itkOutputImage = const_cast&lt;ItkOutputImageType *&gt;(reinterpret_cast&lt;const ItkOutputImageType *&gt;(itkInputImage));
      return;</span>
    }
    typedef itk::CastImageFilter&lt;ItkInputImageType, ItkOutputImageType&gt; CastImageFilterType;
<span style = "background-color:#fdd">    typename CastImageFilterType::Pointer castImageFilter = CastImageFilterType::New();
    castImageFilter-&gt;SetInput(itkInputImage);
    castImageFilter-&gt;Update();
    itkOutputImage = castImageFilter-&gt;GetOutput();
  }</span>

#endif // DOXYGEN_SKIP
}</pre>
	</body>
</html>