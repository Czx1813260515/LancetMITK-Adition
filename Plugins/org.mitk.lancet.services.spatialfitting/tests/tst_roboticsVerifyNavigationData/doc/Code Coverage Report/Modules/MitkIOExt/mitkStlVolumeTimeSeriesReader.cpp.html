<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkStlVolumeTimeSeriesReader.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include "mitkStlVolumeTimeSeriesReader.h"
#include "mitkSurface.h"
#include "vtkPolyData.h"
#include &lt;mitkIOUtil.h&gt;

void mitk::StlVolumeTimeSeriesReader::GenerateData()
<span style = "background-color:#fdd">{
  if (!this-&gt;GenerateFileList())</span>
  {
<span style = "background-color:#fdd">    itkWarningMacro(&lt;&lt; "Sorry, file list could not be determined...");
    return;</span>
  }

<span style = "background-color:#fdd">  mitk::Surface::Pointer result = this-&gt;GetOutput();
  MITK_INFO &lt;&lt; "prefix: " &lt;&lt; m_FilePrefix &lt;&lt; ", pattern: " &lt;&lt; m_FilePattern &lt;&lt; std::endl;
  result-&gt;Expand(m_MatchedFileNames.size());
  for (unsigned int i = 0; i &lt; m_MatchedFileNames.size(); ++i)</span>
  {
<span style = "background-color:#fdd">    std::string fileName = m_MatchedFileNames[i];
    MITK_INFO &lt;&lt; "Loading " &lt;&lt; fileName &lt;&lt; " as stl..." &lt;&lt; std::endl;</span>

<span style = "background-color:#fdd">    auto timestepSurface = IOUtil::Load&lt;Surface&gt;(fileName.c_str());</span>

<span style = "background-color:#fdd">    if (timestepSurface.IsNull())</span>
    {
<span style = "background-color:#fdd">      itkWarningMacro(&lt;&lt; "stlReader returned nullptr while reading " &lt;&lt; fileName</span>
                      &lt;&lt; ". Trying to continue with empty vtkPolyData...");
<span style = "background-color:#fdd">      result-&gt;SetVtkPolyData(vtkPolyData::New(), i);
      return;</span>
    }

<span style = "background-color:#fdd">    result-&gt;SetVtkPolyData(timestepSurface-&gt;GetVtkPolyData(), i);
  }
}</span>

bool mitk::StlVolumeTimeSeriesReader::CanReadFile(const std::string /*filename*/,
                                                  const std::string filePrefix,
                                                  const std::string filePattern)
<span style = "background-color:#fdd">{
  if (filePattern != "" &amp;&amp; filePrefix != "")
    return false;</span>

<span style = "background-color:#fdd">  bool extensionFound = false;
  std::string::size_type STLPos = filePattern.rfind(".stl");
  if ((STLPos != std::string::npos) &amp;&amp; (STLPos == filePattern.length() - 4))
    extensionFound = true;</span>

<span style = "background-color:#fdd">  STLPos = filePattern.rfind(".STL");
  if ((STLPos != std::string::npos) &amp;&amp; (STLPos == filePattern.length() - 4))
    extensionFound = true;</span>

<span style = "background-color:#fdd">  if (!extensionFound)
    return false;</span>

<span style = "background-color:#fdd">  return true;
}</span>

mitk::StlVolumeTimeSeriesReader::StlVolumeTimeSeriesReader()
<span style = "background-color:#fdd">{
}</span>

mitk::StlVolumeTimeSeriesReader::~StlVolumeTimeSeriesReader()
<span style = "background-color:#fdd">{
}</span></pre>
	</body>
</html>