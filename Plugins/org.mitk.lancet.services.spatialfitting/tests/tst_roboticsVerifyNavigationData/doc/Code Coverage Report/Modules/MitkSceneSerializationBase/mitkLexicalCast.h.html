<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkLexicalCast.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#ifndef mitkLexicalCast_h
#define mitkLexicalCast_h

#include &lt;boost/lexical_cast.hpp&gt;

namespace mitk
{
  template &lt;typename Target&gt;
  inline Target lexical_cast(const std::string &amp;arg)
<span style = "background-color:#fdd">  {
    Target result = Target();</span>

    // Let Boost try to do the lexical cast, which will most probably succeed!
<span style = "background-color:#fdd">    if (!boost::conversion::detail::try_lexical_convert(arg, result))</span>
    {
      // Fallback to our own conversion using std::istringstream. This happens with
      // Apple LLVM version 9.1.0 (clang-902.0.39.1) on darwin17.5.0 and very small
      // floating point numbers like 0.2225e-307.
<span style = "background-color:#fdd">      std::istringstream stream(arg);
      stream.exceptions(std::ios::badbit);</span>

      try
      {
<span style = "background-color:#fdd">        stream.unsetf(std::ios::skipws);
        stream.precision(boost::detail::lcast_get_precision&lt;Target&gt;());
        stream &gt;&gt; result;</span>
      }
      catch (const std::ios_base::failure &amp;)
<span style = "background-color:#fdd">      {
        boost::conversion::detail::throw_bad_cast&lt;std::string, Target&gt;();
      }
    }</span>

<span style = "background-color:#fdd">    return result;
  }</span>
}

namespace boost
{
  template &lt;&gt;
  inline float lexical_cast&lt;float, std::string&gt;(const std::string &amp;arg)
  {
    return mitk::lexical_cast&lt;float&gt;(arg);
  }

  template &lt;&gt;
  inline double lexical_cast&lt;double, std::string&gt;(const std::string &amp;arg)
<span style = "background-color:#fdd">  {
    return mitk::lexical_cast&lt;double&gt;(arg);
  }</span>

  template &lt;&gt;
  inline long double lexical_cast&lt;long double, std::string&gt;(const std::string &amp;arg)
  {
    return mitk::lexical_cast&lt;long double&gt;(arg);
  }
}

#endif</pre>
	</body>
</html>