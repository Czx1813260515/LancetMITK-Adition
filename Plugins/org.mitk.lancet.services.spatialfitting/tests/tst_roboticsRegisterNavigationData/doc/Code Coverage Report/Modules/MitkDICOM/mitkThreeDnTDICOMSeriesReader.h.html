<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkThreeDnTDICOMSeriesReader.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#ifndef mitkThreeDnTDICOMSeriesReader_h
#define mitkThreeDnTDICOMSeriesReader_h

#include "mitkDICOMITKSeriesGDCMReader.h"

#include "MitkDICOMExports.h"

namespace mitk
{

/**
   \ingroup DICOMReader
   \brief Extends DICOMITKSeriesGDCMReader by sorting/grouping into 3D+t image blocks.

   This class reuses the DICOMITKSeriesGDCMReader class and adds the option of
   grouping 3D blocks at the same spatial position into a single block, which
   is loaded as a 3D+t mitk::Image (compare to \ref DICOMITKSeriesGDCMReader_Condensing).

   To group two output blocks into a single 3D+t block, this class tests a number
   of requirements that the two blocks must fulfill:
    - the &lt;b&gt;origin of the first slice&lt;/b&gt; must be identical
    - the &lt;b&gt;origin of the last slice&lt;/b&gt; must be identical
    - the &lt;b&gt;number of slices&lt;/b&gt; must be identical

   The output blocks described by DICOMImageBlockDescriptor will contains the following properties:
    - \b "3D+t": true if the image is 3D+t
    - \b "timesteps": number of timesteps of an image (only defined if "3D+t" is true)
*/
class MITKDICOM_EXPORT ThreeDnTDICOMSeriesReader : public DICOMITKSeriesGDCMReader
{
  public:

<span style = "background-color:#fdd">    mitkClassMacro( ThreeDnTDICOMSeriesReader, DICOMITKSeriesGDCMReader );
    mitkCloneMacro( ThreeDnTDICOMSeriesReader );</span>
<span style = "background-color:#dfd">    itkNewMacro( ThreeDnTDICOMSeriesReader );</span>
<span style = "background-color:#fdd">    mitkNewMacro1Param( ThreeDnTDICOMSeriesReader, unsigned int );</span>

    /// \brief Control whether 3D+t grouping shall actually be attempted.
    void SetGroup3DandT(bool on);
    bool GetGroup3DandT() const;

<span style = "background-color:#dfd">    itkBooleanMacro(OnlyCondenseSameSeries);
    itkSetMacro(OnlyCondenseSameSeries, bool);</span>
<span style = "background-color:#fdd">    itkGetConstMacro(OnlyCondenseSameSeries, bool);</span>

    // void AllocateOutputImages();
    /// \brief Load via multiple calls to itk::ImageSeriesReader.
    bool LoadImages() override;

    bool operator==(const DICOMFileReader&amp; other) const override;

    static bool GetDefaultGroup3DandT()
<span style = "background-color:#dfd">    {
      return m_DefaultGroup3DandT;
    }</span>
    static bool GetDefaultOnlyCondenseSameSeries()
<span style = "background-color:#dfd">    {
      return m_DefaultOnlyCondenseSameSeries;
    }</span>

  protected:

    ThreeDnTDICOMSeriesReader(unsigned int decimalPlacesForOrientation = Superclass::m_DefaultDecimalPlacesForOrientation);
    ~ThreeDnTDICOMSeriesReader() override;

    ThreeDnTDICOMSeriesReader(const ThreeDnTDICOMSeriesReader&amp; other);
    ThreeDnTDICOMSeriesReader&amp; operator=(const ThreeDnTDICOMSeriesReader&amp; other);

    /**
      \brief Analyze the groups produced by DICOMITKSeriesGDCMReader for 3D+t properties.
      This method tests whether some blocks are at the same spatial position and groups
      them into single blocks.
    */
    SortingBlockList Condense3DBlocks(SortingBlockList&amp;) override;

    bool LoadMitkImageForImageBlockDescriptor(DICOMImageBlockDescriptor&amp; block) const override;

    bool m_Group3DandT;
    bool m_OnlyCondenseSameSeries;

    const static bool m_DefaultGroup3DandT = true;
    const static bool m_DefaultOnlyCondenseSameSeries = true;
};

}

#endif</pre>
	</body>
</html>