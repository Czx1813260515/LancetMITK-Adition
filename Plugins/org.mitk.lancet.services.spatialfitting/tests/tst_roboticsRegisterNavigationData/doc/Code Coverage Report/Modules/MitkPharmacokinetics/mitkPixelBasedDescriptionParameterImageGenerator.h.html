<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkPixelBasedDescriptionParameterImageGenerator.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#ifndef __MITK_PIXEL_BASED_DESCRIPTION_PARAMETER_IMAGE_GENERATOR_H_
#define __MITK_PIXEL_BASED_DESCRIPTION_PARAMETER_IMAGE_GENERATOR_H_

#include &lt;map&gt;

#include &lt;mitkImage.h&gt;

#include "mitkCurveParameterFunctor.h"
#include "mitkDescriptionParameterImageGeneratorBase.h"

#include "MitkPharmacokineticsExports.h"

namespace mitk
{

  /** Class for generating curve descriptor images based on a given 4D mitk image.
   * The class uses curve parameter functor to generate the curve description image(s).
   * Depending on the chosen functor several images may be generated as output.
   * @remark This generator fits every pixel on its own. If you want to fit the mean value of the given mask use
   * ROIBasedDescriptionParameterImageGenerator.
   */
  class MITKPHARMACOKINETICS_EXPORT PixelBasedDescriptionParameterImageGenerator : public DescriptionParameterImageGeneratorBase
  {
  public:
<span style = "background-color:#fdd">    mitkClassMacro(PixelBasedDescriptionParameterImageGenerator, DescriptionParameterImageGeneratorBase);</span>

<span style = "background-color:#fdd">    itkNewMacro(Self);</span>


    typedef ScalarType ParameterImagePixelType;
    typedef std::vector&lt;ParameterImagePixelType&gt; FunctorValueArrayType;

    typedef CurveParameterFunctor FunctorType;

    typedef DescriptionParameterImageGeneratorBase::ParameterNameType ParameterNameType;
    typedef DescriptionParameterImageGeneratorBase::ParameterImageMapType ParameterImageMapType;

<span style = "background-color:#fdd">    itkSetObjectMacro(DynamicImage, Image);
    itkGetConstObjectMacro(DynamicImage, Image);</span>

<span style = "background-color:#fdd">    itkSetObjectMacro(Mask, Image);
    itkGetConstObjectMacro(Mask, Image);</span>

<span style = "background-color:#fdd">    itkSetObjectMacro(Functor, FunctorType);
    itkGetObjectMacro(Functor, FunctorType);</span>

    double GetProgress() const override;

  protected:
<span style = "background-color:#fdd">    PixelBasedDescriptionParameterImageGenerator() : m_Progress(0)
    {
      m_InternalMask = nullptr;
      m_Mask = nullptr;
      m_DynamicImage = nullptr;
    };</span>

<span style = "background-color:#fdd">    ~PixelBasedDescriptionParameterImageGenerator() override {};</span>

    template &lt;typename TPixel, unsigned int VDim&gt;
    void DoParameterCalculation(itk::Image&lt;TPixel, VDim&gt;* image);

    template &lt;typename TPixel, unsigned int VDim&gt;
    void DoPrepareMask(itk::Image&lt;TPixel, VDim&gt;* image);

    void onFitProgressEvent(::itk::Object* caller, const ::itk::EventObject&amp; eventObject);

    bool HasOutdatedResult() const override;
    void CheckValidInputs() const override;
    void DoParameterCalculationAndGetResults(ParameterImageMapType&amp; parameterImages) override;

  private:
    Image::Pointer m_DynamicImage;
    Image::Pointer m_Mask;

    typedef itk::Image&lt;unsigned char, 3&gt; InternalMaskType;
    InternalMaskType::Pointer m_InternalMask;

    FunctorType::Pointer m_Functor;


    ParameterImageMapType m_TempResultMap;

    double m_Progress;
  };

}

#endif // __MITK_PIXEL_BASED_DESCRIPTION_PARAMETER_IMAGE_GENERATOR_H_</pre>
	</body>
</html>