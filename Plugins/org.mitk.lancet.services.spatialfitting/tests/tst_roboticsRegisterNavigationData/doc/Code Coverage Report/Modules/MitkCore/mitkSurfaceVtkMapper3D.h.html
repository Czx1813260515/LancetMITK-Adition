<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkSurfaceVtkMapper3D.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#ifndef mitkSurfaceVtkMapper3D_h
#define mitkSurfaceVtkMapper3D_h

#include "mitkBaseRenderer.h"
#include "mitkLocalStorageHandler.h"
#include "mitkVtkMapper.h"
#include &lt;MitkCoreExports.h&gt;
#include &lt;mitkSurface.h&gt;

#include &lt;vtkActor.h&gt;
#include &lt;vtkDepthSortPolyData.h&gt;
#include &lt;vtkPlaneCollection.h&gt;
#include &lt;vtkPolyDataMapper.h&gt;
#include &lt;vtkPolyDataNormals.h&gt;
#include &lt;vtkSmartPointer.h&gt;

namespace mitk
{
  /**
  * @brief Vtk-based mapper for Surfaces.
  *
  * The mapper renders a surface in 3D. The actor is adapted according to the geometry in
  * the base class in mitk::VtkMapper::UpdateVtkTransform().
  *

  * Properties that can be set for surfaces and influence the surfaceVTKMapper3D are:
  *
  *   - \b "Backface Culling": True enables backface culling, which means only front-facing polygons will be visualized.
  False/disabled by default.
  *   - \b "color": (ColorProperty) Diffuse color of the surface object (this property will be read when
  material.diffuseColor is not defined)
  *   - \b "Opacity": (FloatProperty) Opacity of the surface object
  *   - \b "material.ambientColor": (ColorProperty) Ambient color  of the surface object
  *   - \b "material.ambientCoefficient": (  FloatProperty) Ambient coefficient of the surface object
  *   - \b "material.diffuseColor": ( ColorProperty) Diffuse color of the surface object
  *   - \b "material.diffuseCoefficient": (FloatProperty) Diffuse coefficient of the surface object
  *   - \b "material.specularColor": (ColorProperty) Specular Color of the surface object
  *   - \b "material.specularCoefficient": (FloatProperty) Specular coefficient of the surface object
  *   - \b "material.specularPower": (FloatProperty) Specular power of the surface object
  *   - \b "material.interpolation": (VtkInterpolationProperty) Interpolation
  *   - \b "material.representation": (VtkRepresentationProperty*) Representation
  *   - \b "material.wireframeLineWidth": (FloatProperty) Width in pixels of the lines drawn.
  *   - \b "material.pointSize": (FloatProperty) Size in pixels of the points drawn.
  *   - \b "scalar visibility": (BoolProperty) If the scarlars of the surface are visible
  *   - \b "Surface.TransferFunction (TransferFunctionProperty) Set a transferfunction for coloring the surface
  *   - \b "LookupTable (LookupTableProperty) LookupTable

  * Properties to look for are:
  *
  *   - \b "scalar visibility": if set to on, scalars assigned to the data are shown
  *        Turn this on if using a lookup table.
  *   - \b "ScalarsRangeMinimum": Optional. Can be used to store the scalar min, e.g.
  *         for the level window settings.
  *   - \b "ScalarsRangeMaximum": Optional. See above.
  *
  * There might be still some other, deprecated properties. These will not be documented anymore.
  * Please check the source if you really need them.
  *
  * @ingroup Mapper
  */

  class MITKCORE_EXPORT SurfaceVtkMapper3D : public VtkMapper
  {
  public:
<span style = "background-color:#fdd">    mitkClassMacro(SurfaceVtkMapper3D, VtkMapper);</span>

<span style = "background-color:#fdd">    itkFactorylessNewMacro(Self);</span>

<span style = "background-color:#fdd">    itkCloneMacro(Self);</span>

<span style = "background-color:#fdd">    itkSetMacro(GenerateNormals, bool);</span>

<span style = "background-color:#fdd">    itkGetMacro(GenerateNormals, bool);</span>

    virtual const mitk::Surface *GetInput();

    vtkProp *GetVtkProp(mitk::BaseRenderer *renderer) override;

    virtual void ApplyAllProperties(mitk::BaseRenderer *renderer, vtkActor *actor);

    static void SetDefaultProperties(mitk::DataNode *node, mitk::BaseRenderer *renderer = nullptr, bool overwrite = false);

  protected:
    SurfaceVtkMapper3D();

    ~SurfaceVtkMapper3D() override;

    void GenerateDataForRenderer(mitk::BaseRenderer *renderer) override;

    void ResetMapper(mitk::BaseRenderer *renderer) override;

    /** Checks whether the specified property is a ClippingProperty and if yes,
     * adds it to m_ClippingPlaneCollection (internal method). */
    virtual void CheckForClippingProperty(mitk::BaseRenderer *renderer, mitk::BaseProperty *property);

    bool m_GenerateNormals;

  public:
    class LocalStorage : public mitk::Mapper::BaseLocalStorage
    {
    public:
      vtkSmartPointer&lt;vtkActor&gt; m_Actor;
      vtkSmartPointer&lt;vtkPolyDataMapper&gt; m_VtkPolyDataMapper;
      vtkSmartPointer&lt;vtkPolyDataNormals&gt; m_VtkPolyDataNormals;
      vtkSmartPointer&lt;vtkPlaneCollection&gt; m_ClippingPlaneCollection;
      vtkSmartPointer&lt;vtkDepthSortPolyData&gt; m_DepthSort;
      itk::TimeStamp m_ShaderTimestampUpdate;

<span style = "background-color:#fdd">      LocalStorage()</span>
      {
<span style = "background-color:#fdd">        m_VtkPolyDataMapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();
        m_VtkPolyDataNormals = vtkSmartPointer&lt;vtkPolyDataNormals&gt;::New();
        m_Actor = vtkSmartPointer&lt;vtkActor&gt;::New();
        m_ClippingPlaneCollection = vtkSmartPointer&lt;vtkPlaneCollection&gt;::New();</span>

<span style = "background-color:#fdd">        m_Actor-&gt;SetMapper(m_VtkPolyDataMapper);</span>

<span style = "background-color:#fdd">        m_DepthSort = vtkSmartPointer&lt;vtkDepthSortPolyData&gt;::New();
      }</span>

<span style = "background-color:#fdd">      ~LocalStorage() override {}</span>
    };

    mitk::LocalStorageHandler&lt;LocalStorage&gt; m_LSH;

    static void ApplyMitkPropertiesToVtkProperty(mitk::DataNode *node,
                                                 vtkProperty *property,
                                                 mitk::BaseRenderer *renderer);
    static void SetDefaultPropertiesForVtkProperty(mitk::DataNode *node, mitk::BaseRenderer *renderer, bool overwrite);
  };
} // namespace mitk

#endif /* mitkSurfaceVtkMapper3D_h */</pre>
	</body>
</html>