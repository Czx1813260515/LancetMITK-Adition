<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkImageChannelSelector.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include "mitkImageChannelSelector.h"

<span style = "background-color:#fdd">mitk::ImageChannelSelector::ImageChannelSelector() : m_ChannelNr(0)
{
}</span>

mitk::ImageChannelSelector::~ImageChannelSelector()
<span style = "background-color:#fdd">{
}</span>

void mitk::ImageChannelSelector::GenerateOutputInformation()
<span style = "background-color:#fdd">{
  mitk::Image::ConstPointer input = this-&gt;GetInput();
  mitk::Image::Pointer output = this-&gt;GetOutput();</span>

<span style = "background-color:#fdd">  itkDebugMacro(&lt;&lt; "GenerateOutputInformation()");</span>

<span style = "background-color:#fdd">  output-&gt;Initialize(input-&gt;GetPixelType(), input-&gt;GetDimension(), input-&gt;GetDimensions());</span>

  // initialize geometry
<span style = "background-color:#fdd">  output-&gt;SetPropertyList(input-&gt;GetPropertyList()-&gt;Clone());
  mitk::TimeGeometry::Pointer clonGeometry = input-&gt;GetTimeGeometry()-&gt;Clone();
  output-&gt;SetTimeGeometry(clonGeometry.GetPointer());
}</span>

void mitk::ImageChannelSelector::GenerateData()
<span style = "background-color:#fdd">{
  const Image::RegionType &amp;requestedRegion = GetOutput()-&gt;GetRequestedRegion();</span>

  // do we really need the complete channel?
<span style = "background-color:#fdd">  if (requestedRegion.GetSize(3) &gt; 1)
    SetChannelItem(GetChannelData(m_ChannelNr), 0);</span>
  else
    // or only a complete volume at a time?
<span style = "background-color:#fdd">    if (requestedRegion.GetSize(2) &gt; 1)
    SetVolumeItem(GetVolumeData(requestedRegion.GetIndex(3), m_ChannelNr), requestedRegion.GetIndex(3), 0);</span>
  else
    // not even a complete volume, so now take just a slice!
<span style = "background-color:#fdd">    SetSliceItem(GetSliceData(requestedRegion.GetIndex(2), requestedRegion.GetIndex(3), m_ChannelNr),</span>
                 requestedRegion.GetIndex(2),
                 requestedRegion.GetIndex(3),
                 0);
<span style = "background-color:#fdd">}</span>

void mitk::ImageChannelSelector::GenerateInputRequestedRegion()
<span style = "background-color:#fdd">{
  Superclass::GenerateInputRequestedRegion();</span>

<span style = "background-color:#fdd">  mitk::ImageToImageFilter::InputImagePointer input =this-&gt;GetInput();
  mitk::Image::Pointer output = this-&gt;GetOutput();</span>

<span style = "background-color:#fdd">  Image::RegionType requestedRegion;
  requestedRegion = output-&gt;GetRequestedRegion();
  requestedRegion.SetIndex(4, m_ChannelNr);
  requestedRegion.SetSize(4, 1);</span>

<span style = "background-color:#fdd">  input-&gt;SetRequestedRegion(&amp;requestedRegion);
}</span></pre>
	</body>
</html>