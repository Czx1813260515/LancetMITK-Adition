<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkPropertyAliases.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include "mitkPropertyAliases.h"
#include &lt;algorithm&gt;
#include &lt;utility&gt;

#ifdef _MSC_VER
#pragma warning(disable : 4503) // "decorated name length exceeded, name was truncated"
#endif

class AliasEquals
{
public:
<span style = "background-color:#fdd">  AliasEquals(const std::string &amp;alias) : m_Alias(alias) {}</span>
  bool operator()(const std::pair&lt;std::string, std::vector&lt;std::string&gt;&gt; &amp;element)
<span style = "background-color:#fdd">  {
    auto iter = std::find(element.second.begin(), element.second.end(), m_Alias);
    return iter != element.second.end();
  }</span>

private:
  std::string m_Alias;
};

mitk::PropertyAliases::PropertyAliases()
<span style = "background-color:#dfd">{
}</span>

mitk::PropertyAliases::~PropertyAliases()
<span style = "background-color:#dfd">{
}</span>

bool mitk::PropertyAliases::AddAlias(const std::string &amp;propertyName,
                                     const std::string &amp;alias,
                                     const std::string &amp;className)
<span style = "background-color:#fdd">{
  if (alias.empty())
    return false;</span>

<span style = "background-color:#fdd">  AliasesMap &amp;aliases = m_Aliases[className];
  auto iter = aliases.find(propertyName);</span>

<span style = "background-color:#fdd">  if (iter != aliases.end())</span>
  {
<span style = "background-color:#fdd">    if (std::find(iter-&gt;second.begin(), iter-&gt;second.end(), alias) == iter-&gt;second.end())
      iter-&gt;second.push_back(alias);
  }</span>
  else
  {
<span style = "background-color:#fdd">    aliases.insert(std::make_pair(propertyName, std::vector&lt;std::string&gt;(1, alias)));</span>
  }

<span style = "background-color:#fdd">  return true;
}</span>

std::vector&lt;std::string&gt; mitk::PropertyAliases::GetAliases(const std::string &amp;propertyName,
                                                           const std::string &amp;className)
<span style = "background-color:#fdd">{
  if (!propertyName.empty())</span>
  {
<span style = "background-color:#fdd">    AliasesMap &amp;aliases = m_Aliases[className];
    AliasesMapConstIterator iter = aliases.find(propertyName);</span>

<span style = "background-color:#fdd">    if (iter != aliases.end())
      return iter-&gt;second;
  }</span>

<span style = "background-color:#fdd">  return std::vector&lt;std::string&gt;();
}</span>

std::string mitk::PropertyAliases::GetPropertyName(const std::string &amp;alias, const std::string &amp;className)
<span style = "background-color:#fdd">{
  if (!alias.empty())</span>
  {
<span style = "background-color:#fdd">    AliasesMap &amp;aliases = m_Aliases[className];
    AliasesMapConstIterator iter = std::find_if(aliases.begin(), aliases.end(), AliasEquals(alias));</span>

<span style = "background-color:#fdd">    if (iter != aliases.end())
      return iter-&gt;first;
  }</span>

<span style = "background-color:#fdd">  return "";
}</span>

bool mitk::PropertyAliases::HasAliases(const std::string &amp;propertyName, const std::string &amp;className)
<span style = "background-color:#fdd">{
  const AliasesMap &amp;aliases = m_Aliases[className];</span>

<span style = "background-color:#fdd">  return !propertyName.empty() ? aliases.find(propertyName) != aliases.end() : false;
}</span>

void mitk::PropertyAliases::RemoveAlias(const std::string &amp;propertyName,
                                        const std::string &amp;alias,
                                        const std::string &amp;className)
<span style = "background-color:#fdd">{
  if (!propertyName.empty() &amp;&amp; !alias.empty())</span>
  {
<span style = "background-color:#fdd">    AliasesMap &amp;aliases = m_Aliases[className];
    auto iter = aliases.find(propertyName);</span>

<span style = "background-color:#fdd">    if (iter != aliases.end())</span>
    {
<span style = "background-color:#fdd">      auto aliasIter = std::find(iter-&gt;second.begin(), iter-&gt;second.end(), alias);</span>

<span style = "background-color:#fdd">      if (aliasIter != iter-&gt;second.end())</span>
      {
<span style = "background-color:#fdd">        iter-&gt;second.erase(aliasIter);</span>

<span style = "background-color:#fdd">        if (iter-&gt;second.empty())
          aliases.erase(propertyName);</span>
      }
<span style = "background-color:#fdd">    }
  }
}</span>

void mitk::PropertyAliases::RemoveAliases(const std::string &amp;propertyName, const std::string &amp;className)
<span style = "background-color:#fdd">{
  if (!propertyName.empty())</span>
  {
<span style = "background-color:#fdd">    AliasesMap &amp;aliases = m_Aliases[className];
    aliases.erase(propertyName);</span>
  }
<span style = "background-color:#fdd">}</span>

void mitk::PropertyAliases::RemoveAllAliases(const std::string &amp;className)
<span style = "background-color:#fdd">{
  AliasesMap &amp;aliases = m_Aliases[className];
  aliases.clear();
}</span></pre>
	</body>
</html>