<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkMaskUtilities.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#ifndef MITKMASKUTIL
#define MITKMASKUTIL

#include &lt;MitkImageStatisticsExports.h&gt;
#include &lt;mitkImage.h&gt;
#include &lt;mitkNodePredicateGeometry.h&gt;
#include &lt;itkImage.h&gt;

namespace mitk
{
/**
 * @brief Utility class for mask operations. It checks whether an image and a mask are compatible (spacing, orientation, etc...)
 * and it can also crop an image to the LargestPossibleRegion of the Mask
 */
template &lt;class TPixel, unsigned int VImageDimension&gt;
class MaskUtilities: public itk::Object
    {
    public:
        /** Standard Self typedef */
        typedef MaskUtilities                       Self;
        typedef itk::Object                         Superclass;
        typedef itk::SmartPointer&lt; Self &gt;           Pointer;
        typedef itk::SmartPointer&lt; const Self &gt;     ConstPointer;

        /** Method for creation through the object factory. */
<span style = "background-color:#fdd">        itkNewMacro(Self); /** Runtime information support. */
        itkTypeMacro(MaskUtilities, itk::Object);</span>

        typedef itk::Image&lt;TPixel, VImageDimension&gt; ImageType;
        typedef itk::Image&lt;unsigned short, VImageDimension&gt; MaskType;

        /**
         * @brief Set image
         */
        void SetImage(ImageType* image);

        /**
         * @brief Set mask
         */
        void SetMask(MaskType* mask);

        /**
         * @brief Checks whether mask and image are compatible for joint access (as via iterators).
         * Spacing and direction must be the same between the two and they must be aligned. Also, the mask must be completely inside the image
         */
        bool CheckMaskSanity();

        /**
         * @brief Crops the image to the LargestPossibleRegion of the mask
         */
        typename itk::Image&lt;TPixel, VImageDimension&gt;::Pointer ExtractMaskImageRegion();

    protected:
<span style = "background-color:#fdd">        MaskUtilities(): m_Image(nullptr), m_Mask(nullptr){}</span>

<span style = "background-color:#fdd">        ~MaskUtilities() override{}</span>

    private:
        itk::Image&lt;TPixel, VImageDimension&gt;* m_Image;
        itk::Image&lt;unsigned short, VImageDimension&gt;* m_Mask;
    };

/** Tolerance used to check if the mask and input image are compatible for
 * coordinate aspects (orgin, size, grid alignment).*/
constexpr double MASK_SUITABILITY_TOLERANCE_COORDINATE = NODE_PREDICATE_GEOMETRY_DEFAULT_CHECK_COORDINATE_PRECISION;
/** Tolerance used to check if the mask and input image are compatible for
 * direction aspects (orientation of mask and image).*/
constexpr double MASK_SUITABILITY_TOLERANCE_DIRECTION = NODE_PREDICATE_GEOMETRY_DEFAULT_CHECK_DIRECTION_PRECISION;

}

#ifndef ITK_MANUAL_INSTANTIATION
#include &lt;mitkMaskUtilities.tpp&gt;
#endif

#endif</pre>
	</body>
</html>