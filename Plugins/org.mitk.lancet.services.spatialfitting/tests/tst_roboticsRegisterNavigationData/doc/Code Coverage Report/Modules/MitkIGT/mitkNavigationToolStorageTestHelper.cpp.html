<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkNavigationToolStorageTestHelper.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

  #include &lt;mitkNavigationToolStorage.h&gt;
  #include &lt;mitkIOUtil.h&gt;
  #include "mitkNavigationToolStorageTestHelper.h"
  #include "mitkNDIAuroraTypeInformation.h"
  #include "mitkMicronTrackerTypeInformation.h"

mitk::NavigationToolStorage::Pointer mitk::NavigationToolStorageTestHelper::CreateTestData_SimpleStorage()
<span style = "background-color:#fdd">    {</span>
    //create Tool Storage
<span style = "background-color:#fdd">    mitk::NavigationToolStorage::Pointer myStorage = mitk::NavigationToolStorage::New();</span>
    //first tool
<span style = "background-color:#fdd">    mitk::NavigationTool::Pointer myTool1 = mitk::NavigationTool::New();
    myTool1-&gt;SetIdentifier("001");
    myStorage-&gt;AddTool(myTool1);</span>
    //second tool
<span style = "background-color:#fdd">    mitk::NavigationTool::Pointer myTool2 = mitk::NavigationTool::New();
    myTool2-&gt;SetIdentifier("002");
    myStorage-&gt;AddTool(myTool2);</span>
    //third tool
<span style = "background-color:#fdd">    mitk::NavigationTool::Pointer myTool3 = mitk::NavigationTool::New();
    myTool3-&gt;SetIdentifier("003");
    myStorage-&gt;AddTool(myTool3);</span>

<span style = "background-color:#fdd">    return myStorage;
    }</span>

  mitk::NavigationToolStorage::Pointer mitk::NavigationToolStorageTestHelper::CreateTestData_StorageWithOneTool()
<span style = "background-color:#fdd">    {</span>
    //create Tool Storage
<span style = "background-color:#fdd">    mitk::NavigationToolStorage::Pointer myStorage = mitk::NavigationToolStorage::New();</span>

    //first tool
<span style = "background-color:#fdd">    mitk::NavigationTool::Pointer myTool1 = mitk::NavigationTool::New();
    myTool1-&gt;SetIdentifier("001");
    mitk::PointSet::Pointer CalLandmarks1 = mitk::PointSet::New();
    mitk::Point3D testPt1;
    mitk::FillVector3D(testPt1,1,2,3);
    CalLandmarks1-&gt;SetPoint(0,testPt1);
    mitk::PointSet::Pointer RegLandmarks1 = mitk::PointSet::New();
    mitk::Point3D testPt2;
    mitk::FillVector3D(testPt2,4,5,6);
    RegLandmarks1-&gt;SetPoint(5,testPt2);
    myTool1-&gt;SetToolControlPoints(CalLandmarks1);
    myTool1-&gt;SetToolLandmarks(RegLandmarks1);
    mitk::Point3D toolTipPos;
    mitk::FillVector3D(toolTipPos,1.3423,2.323,4.332);
    mitk::Quaternion toolTipRot = mitk::Quaternion(0.1,0.2,0.3,0.4);
    myTool1-&gt;SetToolTipPosition(toolTipPos);
    myTool1-&gt;SetToolAxisOrientation(toolTipRot);
    myStorage-&gt;AddTool(myTool1);</span>

<span style = "background-color:#fdd">    return myStorage;
    }</span>

  mitk::NavigationToolStorage::Pointer mitk::NavigationToolStorageTestHelper::CreateTestData_ComplexStorage(std::string toolFilePath, std::string toolSurfacePath1, std::string toolSurfacePath2)
<span style = "background-color:#fdd">    {</span>
    //create first tool
<span style = "background-color:#fdd">    mitk::NavigationTool::Pointer myNavigationTool = mitk::NavigationTool::New();
    myNavigationTool-&gt;SetCalibrationFile(toolFilePath);
    mitk::DataNode::Pointer myNode = mitk::DataNode::New();
    myNode-&gt;SetName("ClaronTool");
    myNode-&gt;SetData(mitk::IOUtil::Load&lt;mitk::Surface&gt;(toolSurfacePath1)); //load an stl File
    myNavigationTool-&gt;SetDataNode(myNode);
    myNavigationTool-&gt;SetIdentifier("ClaronTool#1");
    myNavigationTool-&gt;SetSerialNumber("0815");
    myNavigationTool-&gt;SetTrackingDeviceType(mitk::MicronTrackerTypeInformation::GetTrackingDeviceName());
    myNavigationTool-&gt;SetType(mitk::NavigationTool::Fiducial);</span>

    //create second tool
<span style = "background-color:#fdd">    mitk::NavigationTool::Pointer myNavigationTool2 = mitk::NavigationTool::New();
    mitk::Surface::Pointer testSurface2;</span>

<span style = "background-color:#fdd">    mitk::DataNode::Pointer myNode2 = mitk::DataNode::New();
    myNode2-&gt;SetName("AuroraTool");</span>

    //load an stl File
<span style = "background-color:#fdd">    testSurface2 = mitk::IOUtil::Load&lt;mitk::Surface&gt;(toolSurfacePath2);
    myNode2-&gt;SetData(testSurface2);</span>

<span style = "background-color:#fdd">    myNavigationTool2-&gt;SetDataNode(myNode2);
    myNavigationTool2-&gt;SetIdentifier("AuroraTool#1");
    myNavigationTool2-&gt;SetSerialNumber("0816");
    myNavigationTool2-&gt;SetTrackingDeviceType(mitk::NDIAuroraTypeInformation::GetTrackingDeviceName());
    myNavigationTool2-&gt;SetType(mitk::NavigationTool::Instrument);</span>

    //create navigation tool storage
<span style = "background-color:#fdd">    mitk::NavigationToolStorage::Pointer myStorage = mitk::NavigationToolStorage::New();
    myStorage-&gt;AddTool(myNavigationTool);
    myStorage-&gt;AddTool(myNavigationTool2);</span>

<span style = "background-color:#fdd">    return myStorage;
    }</span></pre>
	</body>
</html>