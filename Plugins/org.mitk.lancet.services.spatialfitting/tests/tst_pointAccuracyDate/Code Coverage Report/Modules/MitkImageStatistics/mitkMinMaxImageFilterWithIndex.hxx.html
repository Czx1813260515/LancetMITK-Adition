<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkMinMaxImageFilterWithIndex.hxx</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
#ifndef MITK_MinMaxImageFilterWithIndex_HXX
#define MITK_MinMaxImageFilterWithIndex_HXX

#include &lt;mitkMinMaxImageFilterWithIndex.h&gt;
#include &lt;limits&gt;

namespace itk
{


template&lt; typename TInputImage &gt;
void MinMaxImageFilterWithIndex&lt; TInputImage &gt;::AllocateOutputs()
<span style = "background-color:#fdd">{</span>
  // Pass the input through as the output
<span style = "background-color:#fdd">  typename TInputImage::Pointer image =</span>
    const_cast&lt; TInputImage * &gt;( this-&gt;GetInput() );

<span style = "background-color:#fdd">  this-&gt;GraftOutput(image);</span>

  // Nothing that needs to be allocated for the remaining outputs
<span style = "background-color:#fdd">}</span>

template&lt; typename TInputImage &gt;
void MinMaxImageFilterWithIndex&lt; TInputImage &gt;::ThreadedGenerateData(const RegionType &amp;
                                      outputRegionForThread,
                                      ThreadIdType threadId)
<span style = "background-color:#fdd">{
  const SizeValueType size0 = outputRegionForThread.GetSize(0);
  if( size0 == 0)</span>
    {
<span style = "background-color:#fdd">    return;</span>
    }
  PixelType value;

  PixelType threadMin, threadMax;
  IndexType threadMinIndex;
  IndexType threadMaxIndex;
<span style = "background-color:#fdd">  threadMinIndex.Fill(0);
  threadMaxIndex.Fill(0);</span>

<span style = "background-color:#fdd">  threadMin = std::numeric_limits&lt;PixelType&gt;::max();
  threadMax = std::numeric_limits&lt;PixelType&gt;::min();</span>

<span style = "background-color:#fdd">  ImageRegionConstIteratorWithIndex&lt; TInputImage &gt; it (this-&gt;GetInput(), outputRegionForThread);</span>

  // do the work
<span style = "background-color:#fdd">  while ( !it.IsAtEnd() )</span>
  {
<span style = "background-color:#fdd">    value = it.Get();
    if (value &lt; threadMin)</span>
    {
<span style = "background-color:#fdd">      threadMin = value;
      threadMinIndex = it.GetIndex();</span>
    }
<span style = "background-color:#fdd">    if (value &gt; threadMax)</span>
    {
<span style = "background-color:#fdd">      threadMax = value;
      threadMaxIndex = it.GetIndex();</span>
    }
<span style = "background-color:#fdd">    ++it;
  }</span>

<span style = "background-color:#fdd">  m_ThreadMax[threadId] = threadMax;
  m_ThreadMin[threadId] = threadMin;
  m_ThreadMaxIndex[threadId] = threadMaxIndex;
  m_ThreadMinIndex[threadId] = threadMinIndex;
}</span>

template&lt; typename TInputImage &gt;
void MinMaxImageFilterWithIndex&lt; TInputImage &gt;::BeforeThreadedGenerateData()
<span style = "background-color:#fdd">{
  ThreadIdType numberOfThreads = this-&gt;GetNumberOfWorkUnits();
  m_ThreadMin.resize(numberOfThreads);
  m_ThreadMax.resize(numberOfThreads);
  m_ThreadMinIndex.resize(numberOfThreads);
  m_ThreadMaxIndex.resize(numberOfThreads);</span>

<span style = "background-color:#fdd">  for (unsigned int i =0; i &lt; numberOfThreads; i++)</span>
  {
<span style = "background-color:#fdd">    m_ThreadMin[i] = std::numeric_limits&lt;PixelType&gt;::max();
    m_ThreadMax[i] = std::numeric_limits&lt;PixelType&gt;::min();
  }</span>

<span style = "background-color:#fdd">  m_Min = std::numeric_limits&lt;PixelType&gt;::max();
  m_Max = std::numeric_limits&lt;PixelType&gt;::min();</span>

<span style = "background-color:#fdd">}</span>

template&lt; typename TInputImage &gt;
void MinMaxImageFilterWithIndex&lt; TInputImage &gt;::AfterThreadedGenerateData()
<span style = "background-color:#fdd">{
  ThreadIdType numberOfThreads = this-&gt;GetNumberOfWorkUnits();</span>

<span style = "background-color:#fdd">  for (ThreadIdType i = 0; i &lt; numberOfThreads; i++)</span>
  {
<span style = "background-color:#fdd">    if (m_ThreadMin[i] &lt; m_Min)</span>
    {
<span style = "background-color:#fdd">      m_Min = m_ThreadMin[i];
      m_MinIndex = m_ThreadMinIndex[i];</span>
    }
<span style = "background-color:#fdd">    if (m_ThreadMax[i] &gt; m_Max)</span>
    {
<span style = "background-color:#fdd">      m_Max = m_ThreadMax[i];
      m_MaxIndex = m_ThreadMaxIndex[i];</span>
    }
<span style = "background-color:#fdd">  }
}</span>
}
#endif</pre>
	</body>
</html>