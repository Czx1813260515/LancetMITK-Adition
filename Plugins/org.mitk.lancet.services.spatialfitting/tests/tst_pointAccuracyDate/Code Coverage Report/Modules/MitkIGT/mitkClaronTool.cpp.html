<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkClaronTool.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include "mitkClaronTool.h"
#include &lt;cstdio&gt;
#include &lt;vector&gt;
#include &lt;iostream&gt;

<span style = "background-color:#fdd">mitk::ClaronTool::ClaronTool() : TrackingTool()
{
}</span>

mitk::ClaronTool::~ClaronTool(void)
<span style = "background-color:#fdd">{
}</span>

std::string mitk::ClaronTool::GetCalibrationName()
<span style = "background-color:#fdd">{
  return &amp;m_CalibrationName[0];
}</span>

void mitk::ClaronTool::SetCalibrationName(std::string name)
<span style = "background-color:#fdd">{
  this-&gt;m_CalibrationName=name;
}</span>

bool mitk::ClaronTool::LoadFile(const char* filename)
<span style = "background-color:#fdd">{
  if (filename==nullptr)</span>
  {
<span style = "background-color:#fdd">    return false;
  }</span>
  else
  {
<span style = "background-color:#fdd">    return this-&gt;LoadFile(std::string(filename));</span>
  }
<span style = "background-color:#fdd">}</span>

bool mitk::ClaronTool::LoadFile(std::string filename)
<span style = "background-color:#fdd">{</span>
  //This method is not really "loading" a file. It is saving the filename and
  //parsing the calibration name out of the filename. The calibration name is
  //later used by the tracking device to really load the file.

<span style = "background-color:#fdd">  if (filename.empty())</span>
  {
<span style = "background-color:#fdd">    return false;
  }</span>
  else
  {
<span style = "background-color:#fdd">    m_Filename = filename;</span>

<span style = "background-color:#fdd">    int end = m_Filename.length();
    int start = end;</span>

    //check whether the path is given in Windows format
<span style = "background-color:#fdd">    while( (start!=0) &amp;&amp; (filename[start-1]!='\\') ) start--;</span>

    //if not (start==0) perhaps it is given in Linux format
<span style = "background-color:#fdd">    if (start==0)</span>
    {
<span style = "background-color:#fdd">      start = end;
      while( (start!=0) &amp;&amp; (filename[start-1]!='/') )</span>
      {
<span style = "background-color:#fdd">        start--;
      }</span>
    }

    //if there are no \ and no / in the string something must be wrong...
<span style = "background-color:#fdd">    if (start==0) return false;</span>

<span style = "background-color:#fdd">    this-&gt;m_CalibrationName = m_Filename.substr(start,end);</span>

<span style = "background-color:#fdd">    return true;</span>
  }
<span style = "background-color:#fdd">}</span>

std::string mitk::ClaronTool::GetFile()
<span style = "background-color:#fdd">{
  return m_Filename;
}</span>

void mitk::ClaronTool::SetToolHandle (mitk::claronToolHandle handle)
<span style = "background-color:#fdd">{
  this-&gt;m_ToolHandle = handle;
}</span>

mitk::claronToolHandle mitk::ClaronTool::GetToolHandle()
<span style = "background-color:#fdd">{
  return this-&gt;m_ToolHandle;
}</span></pre>
	</body>
</html>