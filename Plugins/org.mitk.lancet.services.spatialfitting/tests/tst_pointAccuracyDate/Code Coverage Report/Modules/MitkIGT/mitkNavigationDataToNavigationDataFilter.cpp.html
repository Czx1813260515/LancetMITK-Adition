<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkNavigationDataToNavigationDataFilter.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include "mitkNavigationDataToNavigationDataFilter.h"


mitk::NavigationDataToNavigationDataFilter::NavigationDataToNavigationDataFilter()
<span style = "background-color:#fdd">: mitk::NavigationDataSource()
{
mitk::NavigationData::Pointer output = mitk::NavigationData::New();
this-&gt;SetNumberOfRequiredOutputs(1);
this-&gt;SetNthOutput(0, output.GetPointer());
}</span>


mitk::NavigationDataToNavigationDataFilter::~NavigationDataToNavigationDataFilter()
<span style = "background-color:#fdd">{
}</span>


void mitk::NavigationDataToNavigationDataFilter::SetInput( const NavigationData* nd )
<span style = "background-color:#fdd">{
  this-&gt;SetInput(0, nd);
}</span>


void mitk::NavigationDataToNavigationDataFilter::SetInput( unsigned int idx, const NavigationData* nd )
<span style = "background-color:#fdd">{
  if ( nd == nullptr ) // if an input is set to nullptr, remove it
    this-&gt;RemoveInput(idx);</span>
  else
<span style = "background-color:#fdd">    this-&gt;ProcessObject::SetNthInput(idx, const_cast&lt;NavigationData*&gt;(nd));   // ProcessObject is not const-correct so a const_cast is required here
  this-&gt;CreateOutputsForAllInputs();
}</span>


const mitk::NavigationData* mitk::NavigationDataToNavigationDataFilter::GetInput( void ) const
<span style = "background-color:#fdd">{
  if (this-&gt;GetNumberOfInputs() &lt; 1)
    return nullptr;</span>

<span style = "background-color:#fdd">  return static_cast&lt;const NavigationData*&gt;(this-&gt;ProcessObject::GetInput(0));
}</span>


const mitk::NavigationData* mitk::NavigationDataToNavigationDataFilter::GetInput( unsigned int idx ) const
<span style = "background-color:#fdd">{
  if (this-&gt;GetNumberOfInputs() &lt; 1)
    return nullptr;</span>

<span style = "background-color:#fdd">  return static_cast&lt;const NavigationData*&gt;(this-&gt;ProcessObject::GetInput(idx));
}</span>


const mitk::NavigationData* mitk::NavigationDataToNavigationDataFilter::GetInput(std::string navDataName) const
<span style = "background-color:#fdd">{
  const DataObjectPointerArray&amp; inputs = const_cast&lt;Self*&gt;(this)-&gt;GetInputs();
  for (DataObjectPointerArray::const_iterator it = inputs.begin(); it != inputs.end(); ++it)
    if (std::string(navDataName) == (static_cast&lt;NavigationData*&gt;(it-&gt;GetPointer()))-&gt;GetName())
      return static_cast&lt;NavigationData*&gt;(it-&gt;GetPointer());
  return nullptr;
}</span>


itk::ProcessObject::DataObjectPointerArraySizeType mitk::NavigationDataToNavigationDataFilter::GetInputIndex( std::string navDataName )
<span style = "background-color:#fdd">{
  DataObjectPointerArray outputs = this-&gt;GetInputs();
  for (DataObjectPointerArray::size_type i = 0; i &lt; outputs.size(); ++i)
    if (navDataName == (static_cast&lt;NavigationData*&gt;(outputs.at(i).GetPointer()))-&gt;GetName())
      return i;
  throw std::invalid_argument("output name does not exist");
}</span>

void mitk::NavigationDataToNavigationDataFilter::ConnectTo(mitk::NavigationDataSource* UpstreamFilter)
<span style = "background-color:#fdd">{
  for (DataObjectPointerArraySizeType i = 0; i &lt; UpstreamFilter-&gt;GetNumberOfOutputs(); i++)</span>
  {
<span style = "background-color:#fdd">    this-&gt;SetInput(i, UpstreamFilter-&gt;GetOutput(i));
  }
}</span>


void mitk::NavigationDataToNavigationDataFilter::CreateOutputsForAllInputs()
<span style = "background-color:#fdd">{
  this-&gt;SetNumberOfIndexedOutputs(this-&gt;GetNumberOfIndexedInputs());  // create outputs for all inputs
  bool isModified = false;
  for (unsigned int idx = 0; idx &lt; this-&gt;GetNumberOfIndexedOutputs(); ++idx){
    if (this-&gt;GetOutput(idx) == nullptr)</span>
    {
<span style = "background-color:#fdd">      mitk::NavigationData::Pointer newOutput = mitk::NavigationData::New();
      this-&gt;SetNthOutput(idx, newOutput);
      isModified = true;
    }
  }</span>

<span style = "background-color:#fdd">  if(isModified)
    this-&gt;Modified();
}</span></pre>
	</body>
</html>