<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkQuaternionAveraging.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include "mitkQuaternionAveraging.h"
//#include "bussvrmath/Quaternion.h"
//#include "SphereMean.h"

mitk::QuaternionAveraging::QuaternionAveraging()
<span style = "background-color:#fdd">{</span>


<span style = "background-color:#fdd">}</span>

mitk::QuaternionAveraging::~QuaternionAveraging()
<span style = "background-color:#fdd">{</span>

<span style = "background-color:#fdd">}</span>

mitk::Quaternion mitk::QuaternionAveraging::CalcAverage(const std::vector&lt;Quaternion&gt;&amp; quaternions, Mode mode)
<span style = "background-color:#fdd">{</span>
mitk::Quaternion result;
<span style = "background-color:#fdd">switch (mode)</span>
  {
  case SimpleMean:
<span style = "background-color:#fdd">  for (std::vector&lt;Quaternion&gt;::size_type i=0; i&lt;quaternions.size(); i++)</span>
    {
<span style = "background-color:#fdd">    result[0] += quaternions.at(i)[0];
    result[1] += quaternions.at(i)[1];
    result[2] += quaternions.at(i)[2];
    result[3] += quaternions.at(i)[3];
    }
  result[0] /= quaternions.size();
  result[1] /= quaternions.size();
  result[2] /= quaternions.size();
  result[3] /= quaternions.size();
  result.normalize();
  break;</span>

  case Slerp:
<span style = "background-color:#fdd">  MITK_WARN &lt;&lt; "SLERP is not implemented yet!";</span>
  /* To avtivate this code, the vrMath classes from Sam Buss need to be included
  BussQuaternion* bussQuaternions = new BussQuaternion[quaternions.size()];
  double* wheights = new double[quaternions.size()];
  for (int i=0; i &lt; quaternions.size(); i++) {
    bussQuaternions[i] = BussQuaternion(quaternions.at(i).x(), quaternions.at(i).y(), quaternions.at(i).z(), quaternions.at(i).r());
    wheights[i]=1;
  }
  BussQuaternion bussResult = ComputeMeanQuat(5,bussQuaternions, wheights);
  mitk::Quaternion resultSlerp(bussResult.x,bussResult.y,bussResult.z,bussResult.w);
  result = resultSlerp;
  */
  break;
  }

<span style = "background-color:#fdd">  return result;
}</span></pre>
	</body>
</html>