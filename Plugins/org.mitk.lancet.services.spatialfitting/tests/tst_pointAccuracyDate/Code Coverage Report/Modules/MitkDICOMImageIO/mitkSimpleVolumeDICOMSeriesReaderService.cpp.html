<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>mitkSimpleVolumeDICOMSeriesReaderService.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
	<body onload="prettyPrint()">
        <h4></h4>
		<pre class="prettyprint lang-cpp linenums">
/*============================================================================

The Medical Imaging Interaction Toolkit (MITK)

Copyright (c) German Cancer Research Center (DKFZ)
All rights reserved.

Use of this source code is governed by a 3-clause BSD license that can be
found in the LICENSE file.

============================================================================*/

#include "mitkSimpleVolumeDICOMSeriesReaderService.h"
#include "mitkDICOMReaderConfigurator.h"
#include &lt;mitkDICOMITKSeriesGDCMReader.h&gt;

#include &lt;usModuleContext.h&gt;
#include &lt;usModuleResource.h&gt;
#include &lt;usGetModuleContext.h&gt;
#include &lt;usModuleResourceStream.h&gt;
#include &lt;usModule.h&gt;
#include &lt;usModuleRegistry.h&gt;

namespace mitk {

  SimpleVolumeDICOMSeriesReaderService::SimpleVolumeDICOMSeriesReaderService()
<span style = "background-color:#dfd">  : BaseDICOMReaderService("MITK Simple 3D Volume Importer")
{
  this-&gt;RegisterService();
}</span>

DICOMFileReader::Pointer SimpleVolumeDICOMSeriesReaderService::GetReader(const mitk::StringList&amp; relevantFiles) const
<span style = "background-color:#fdd">{
  mitk::StringList files = relevantFiles;
  std::string descr;</span>

<span style = "background-color:#fdd">  us::ModuleResource resource =</span>
    us::ModuleRegistry::GetModule("MitkDICOM")-&gt;GetResource("configurations/3D/simpleinstancenumber_soft.xml");

<span style = "background-color:#fdd">  if ( resource.IsValid() )</span>
  {
<span style = "background-color:#fdd">    us::ModuleResourceStream stream(resource);</span>

<span style = "background-color:#fdd">    stream.seekg(0, std::ios::end);
    descr.reserve(stream.tellg());
    stream.seekg(0, std::ios::beg);</span>

<span style = "background-color:#fdd">    descr.assign((std::istreambuf_iterator&lt;char&gt;(stream)),</span>
      std::istreambuf_iterator&lt;char&gt;());
<span style = "background-color:#fdd">  }</span>

<span style = "background-color:#fdd">  DICOMReaderConfigurator::Pointer configurator = DICOMReaderConfigurator::New();
  DICOMFileReader::Pointer reader = configurator-&gt;CreateFromUTF8ConfigString(descr);</span>

<span style = "background-color:#fdd">  return reader.GetPointer();
};</span>


  SimpleVolumeDICOMSeriesReaderService* SimpleVolumeDICOMSeriesReaderService::Clone() const
<span style = "background-color:#fdd">  {
    return new SimpleVolumeDICOMSeriesReaderService(*this);
  }</span>

}</pre>
	</body>
</html>